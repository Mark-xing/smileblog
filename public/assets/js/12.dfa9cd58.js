(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{466:function(t,v,_){"use strict";_.r(v);var s=_(4),a=Object(s.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h2",{attrs:{id:"重绘和回流"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#重绘和回流"}},[t._v("#")]),t._v(" 重绘和回流")]),t._v(" "),_("h3",{attrs:{id:"回流"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#回流"}},[t._v("#")]),t._v(" 回流")]),t._v(" "),_("h4",{attrs:{id:"什么是回流？"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#什么是回流？"}},[t._v("#")]),t._v(" 什么是回流？")]),t._v(" "),_("p",[t._v("当"),_("strong",[t._v("Render Tree")]),t._v("中部分或全部元素的尺寸、结构、或某些属性发生改变时，"),_("strong",[t._v("浏览器重新渲染部分或全部文档的过程称为回流。")])]),t._v(" "),_("h4",{attrs:{id:"导致回流的原因有哪些"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#导致回流的原因有哪些"}},[t._v("#")]),t._v(" 导致回流的原因有哪些")]),t._v(" "),_("ul",[_("li",[t._v("页面首次渲染")]),t._v(" "),_("li",[t._v("浏览器窗口大小发生改变")]),t._v(" "),_("li",[t._v("元素尺寸或位置发生改变")]),t._v(" "),_("li",[t._v("元素内容变化（文字数量或图片大小等）")]),t._v(" "),_("li",[t._v("元素字体大小变化")]),t._v(" "),_("li",[t._v("添加或删除可见的 DOM 元素")]),t._v(" "),_("li",[t._v("激活 CSS 伪类（例如：:hover）")]),t._v(" "),_("li",[t._v("查询某些属性或调用某些方法")])]),t._v(" "),_("h3",{attrs:{id:"重绘"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#重绘"}},[t._v("#")]),t._v(" 重绘")]),t._v(" "),_("h4",{attrs:{id:"什么是重绘？"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#什么是重绘？"}},[t._v("#")]),t._v(" 什么是重绘？")]),t._v(" "),_("p",[t._v("当页面中元素样式的改变并不影响它在文档流中的位置时（例如："),_("strong",[t._v("color")]),t._v("、"),_("strong",[t._v("background-color")]),t._v("、"),_("strong",[t._v("visibility")]),t._v("等），浏览器会将新样式赋予给元素并重新绘制它，这个过程称为重绘。")]),t._v(" "),_("h3",{attrs:{id:"性能对比"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#性能对比"}},[t._v("#")]),t._v(" 性能对比")]),t._v(" "),_("p",[t._v("回流比重绘的代价更高。")]),t._v(" "),_("p",[t._v("有时即使回流一个单一的元素，它的父元素以及任何跟随它的元素也会产生回流。")]),t._v(" "),_("h3",{attrs:{id:"浏览器对重绘和回流的优化"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#浏览器对重绘和回流的优化"}},[t._v("#")]),t._v(" 浏览器对重绘和回流的优化")]),t._v(" "),_("p",[t._v("浏览器会维护一个队列，把所有引起回流和重绘的操作放入队列中，如果队列中的任务数量或者时间间隔达到一个阈值，浏览器就会将队列清空，进行一次批处理，这样可以把多次回流和重绘变成一次。")]),t._v(" "),_("p",[t._v("当你访问以下属性或者方法时，浏览器会立刻清空队列")]),t._v(" "),_("ul",[_("li",[t._v("clientWidth clientHeight clientTop clientLeft")]),t._v(" "),_("li",[t._v("offsetWidth offsetHeight offsetTop offsetLeft")]),t._v(" "),_("li",[t._v("scrollWidth scrollHeight scrollTop scrollLeft")]),t._v(" "),_("li",[t._v("width height")]),t._v(" "),_("li",[t._v("getComputedStyle()")]),t._v(" "),_("li",[t._v("getBoundClientRect()")])]),t._v(" "),_("h3",{attrs:{id:"如何减少回流和重绘的次数"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#如何减少回流和重绘的次数"}},[t._v("#")]),t._v(" 如何减少回流和重绘的次数")]),t._v(" "),_("h4",{attrs:{id:"css"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#css"}},[t._v("#")]),t._v(" css")]),t._v(" "),_("ul",[_("li",[t._v("避免使用 table 布局")]),t._v(" "),_("li",[t._v("尽可能在 DOM 树的最末端改变 class")]),t._v(" "),_("li",[t._v("避免设置多层内联样式")]),t._v(" "),_("li",[t._v("将动画效果应用到 position 属性为 absolute 或 fixed 的元素上")]),t._v(" "),_("li",[t._v("避免使用 CSS 表达式")])]),t._v(" "),_("h4",{attrs:{id:"javascript"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#javascript"}},[t._v("#")]),t._v(" JavaScript")]),t._v(" "),_("ul",[_("li",[t._v("避免频繁操作样式，最好一次性重写"),_("strong",[t._v("style")]),t._v("属性，或者将样式列表定义为 class 并一次性更改"),_("strong",[t._v("class")]),t._v("属性")]),t._v(" "),_("li",[t._v("避免频繁操作 DOM，创建一个"),_("strong",[t._v("documentFragment")]),t._v("，在它上面应用所有"),_("strong",[t._v("DOM")]),t._v("操作，最后再把它添加到文档中")]),t._v(" "),_("li",[t._v("也可以先为元素设置"),_("strong",[t._v("display:none")]),t._v("，操作结束后再把它显示出来。因为在"),_("strong",[t._v("display")]),t._v("属性为"),_("strong",[t._v("none")]),t._v("的元素上进行的 DOM 操作不会引发回流和重绘")]),t._v(" "),_("li",[t._v("避免频繁读取会引发回流和重绘的属性，如果确实需要多次使用，就用一个变量缓存起来")]),t._v(" "),_("li",[t._v("对具有复杂动画的元素使用绝对定位，使它脱离文档流，否则会引起父元素及后续元素频繁回流")])])])}),[],!1,null,null,null);v.default=a.exports}}]);